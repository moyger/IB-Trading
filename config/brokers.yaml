# Broker Configuration
# Multi-venue execution support

interactive_brokers:
  enabled: true
  host: "127.0.0.1"
  port: 7497  # TWS: 7497, IB Gateway: 4002
  client_id: 1
  account: ""  # Set in secrets
  paper_trading: true
  timeout: 30
  
bybit:
  enabled: true
  testnet: true
  api_key: ""  # Set in secrets
  api_secret: ""  # Set in secrets
  base_url: "https://api-testnet.bybit.com"
  
mt5:
  enabled: true
  # Webhook bridge configuration (integrates existing infrastructure)
  webhook_url: "https://tradingview-webhook.karloestrada.workers.dev"
  account_key: "EDGERUNNER_MT5"
  webhook_secret: ""  # Set in secrets if required
  timeout: 10
  
  # Magic number for EA identification
  magic_number: 123456
  
  # Position sizing settings (matches ftmo-bridge.mq5)
  use_fixed_lot: false
  fixed_lot_size: 0.01
  use_equity_percent: true
  equity_percent: 1.0  # 1% of equity per trade
  max_lot_size: 0.10
  min_lot_size: 0.01
  
  # Symbol mapping (Edgerunner â†’ MT5)
  symbol_mapping:
    "BTCUSDT": "BTCUSD"
    "ETHUSDT": "ETHUSD"
    "XRPUSDT": "XRPUSD"
    "XAUUSD": "XAUUSD"  # Gold
    "XAGUSD": "XAGUSD"  # Silver
    "EURUSD": "EURUSD"
    "GBPUSD": "GBPUSD"
    "USDJPY": "USDJPY"

# Execution settings
execution:
  default_broker: "interactive_brokers"
  order_timeout: 30
  retry_attempts: 3
  slippage_model: "realistic"
  commission_model: "tiered"

# Risk limits per broker
risk_limits:
  max_position_size: 100000  # USD
  max_daily_loss: 5000       # USD
  max_positions: 10
  max_correlation: 0.7